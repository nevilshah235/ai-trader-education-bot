{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "strategy-intent",
  "title": "DBotStrategyIntent",
  "description": "Minimal snapshot: strategy intent, risk posture, exit philosophy. Hackathon-friendly.",
  "type": "object",
  "required": ["intent", "risk", "exit"],
  "additionalProperties": false,
  "properties": {
    "intent": {
      "type": "object",
      "description": "What the strategy is set up to trade",
      "properties": {
        "symbol": { "type": "string" },
        "trade_type": { "type": "string" },
        "contract_direction": { "type": "string", "enum": ["call", "put", "both"] },
        "candle_interval": { "type": "string" },
        "restart_on_error": { "type": "boolean" },
        "time_machine": { "type": "boolean" }
      }
    },
    "risk": {
      "type": "object",
      "description": "Risk posture: stake, limits, TP/SL",
      "properties": {
        "stake_or_payout": { "type": "string", "enum": ["stake", "payout"] },
        "amount": { "type": "number" },
        "currency": { "type": "string" },
        "max_loss": { "type": "number" },
        "max_trades": { "type": "integer" },
        "take_profit": { "type": "number" },
        "stop_loss": { "type": "number" }
      }
    },
    "exit": {
      "type": "object",
      "description": "Exit philosophy: when and how to close",
      "properties": {
        "has_custom_sell_conditions": { "type": "boolean" },
        "exit_on_expiry_only": { "type": "boolean" },
        "has_take_profit": { "type": "boolean" },
        "has_stop_loss": { "type": "boolean" },
        "trade_again_condition": { "type": "string", "enum": ["always", "conditional", "never"] }
      }
    }
  }
}
